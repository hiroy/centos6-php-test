# docker-composeでCentOS 6

## 戦略

- 1つのコンテナに全部入れる
  - httpd
  - php
  - postgresql
- 外部のyumリポジトリは使わず、公式を使う
  - ただし、既にサポートが切れているので設定を書き換える必要がある
- 複数の環境を起動・接続することを想定して共有ネットワークを作成
  - 各コンテナはその共有ネットワーク上のIPアドレスを持つ

## 起動・停止の仕方

- `docker-compose` を直接使わずに `make` を使う
  - 複数環境をまたぐ共有ネットワークを `docker network` で作成する
  - 各環境はその共有ネットワーク内でIPアドレスを割り振られる
- `make up`
  - 共有ネットワークがなかったら作成
  - コンテナの起動
- `make connect`
  - コンテナに入る（bash）
- `make down`
  - コンテナの停止
- `make down_network`
  - 共有ネットワークの削除
  - 中で動いているコンテナを停止してから
